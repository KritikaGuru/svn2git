\clearpage\section{Appendix C: The Unicon Component Library}
\subsection{GUI Classes}

This section presents the various methods and class fields making up the
classes implemented in the Unicon GUI library. The library was
originally a single file (gui.icn) but later evolved into a package
(gui) defined by a set of files in their own directory (uni/gui). In
this section if a class has superclasses, their names are given,
separated by colons. Superclasses should be consulted for additional
methods and class fields used by \index{subclass}subclasses. The
default is to have no superclass.

If a required field is omitted then an error message may be produced,
such as the following:

\iconcode{
gui.icn : error processing object TextList : x position unspecified}

This means that the x position of a TextList object was not specified,
probably because the set\_pos() method had not been invoked.

GUI classes depend on graphics facilities defined in
{\textquotedbl}Graphics Programming in Icon{\textquotedbl}, by
Griswold, Jeffery, and Townsend. You will generally need to consult
that book in order to make the best use of these classes.

{\sffamily\bfseries
\index{Event}Event}

An instance of this class is generated by components and passed to the
connected event handler method. It simply holds three elements, which
can be accessed as follows:

get\_source() returns the component associated with the event. This may
be a subclass of either Component or a MenuComponent. If this is
\&null, then an Icon event has occurred which has not produced an Event
from any component.

get\_type() returns a field to distinguish between different types of
event generated by the same component (ACTION\_EVENT,
MOUSE\_PRESS\_EVENT, etc.).

get\_param() returns the parameter associated with the event, if any.

{\sffamily\bfseries
\index{Dialog}Dialog : Container}

This is the parent class of a dialog window.

resize\_win(w, h) resizes the window to the given dimensions.

get\_win() returns the Icon window associated with the dialog.

set\_min\_size(w, h) sets the minimum dimensions for a window. The user
will not be able to resize the window below this size.

set\_focus(c) sets the keyboard focus to the given component.
clear\_focus() clears the focus.

dialog\_event(e:Event) must be over-ridden in the subclass. It is
invoked when an event occurs.

dispose(x) is normally invoked from within dialog\_event(). It sets a
flag to indicate that the dialog should be closed. If x is non-null,
the window was closed already, just free objects.

set\_unique(c) is called by a component c to indicate the beginning of
unique event processing, whereby one component alone receives all
events.\\
clear\_unique(x) unsets unique event processing mode. If x is \&null
then the final event in unique processing mode will be passed to all
objects; otherwise it will not.

show\_modal(d) opens and displays the dialog window, and accepts events
into it. \ As events occur they are handled, until a call to dispose()
is made, then the window is closed and the method returns. Parameter d
is the parent dialog, if any.

Open() opens the dialog window. Close() closes the dialog window.

process\_event(e) processes Icon event e, calling event handlers.

win : window is the dialog{\textquotesingle}s window.\\
is\_open : flag indicates whether the window is open.

focus : Component specifies the component with the current focus.

unique\_flag : flag controls unique processing mode, where one component
receives all events.

re\_process\_flag : flag indicates whether to distribute last Icon event
during unique mode.\\
buffer\_win is a buffer window for double buffering.\\
min\_width : integer is the minimum width of window, or \&null if no
minimum.\\
min\_height : integer is the minimum height of window, or \&null if no
minimum.

{\sffamily\bfseries
\index{Component}Component}

This is the parent class of all the GUI components. All of its methods
and variables therefore apply to its sub-classes.

get\_x\_reference(), get\_y\_reference(), get\_w\_reference(), and
get\_h\_reference() are called by an object to get this
object{\textquotesingle}s x position, y position, width, and height
values from which to compute absolute positions. \ May be over-ridden;
by default returns self.x, self.y, self.w, self.h.

get\_cwin\_reference(), get\_cbwin\_reference() are the same as above
for the cloned window (the reference object inherits the attributes by
cloning this window) and cloned buffer window.

fatal(s) prints an error message s together with the class name, and
stops the program.

generate\_components() : Component* generates the components for the
object. By default this just returns the component itself.

is\_shaded() : flag? succeeds if the component is shaded. \ A shaded
component, such as a button, may be displayed differently, and will not
generate events.\\
set\_is\_shaded() sets the shaded status of the component to
shaded.\\
clear\_is\_shaded() sets the shaded status of the component to not
shaded.\\
toggle\_is\_shaded() swaps the shaded status of the component.

set\_draw\_border() sets the component such that a border is
drawn.\\
clear\_draw\_border() sets the component such that a border is not
drawn.\\
toggle\_draw\_border() toggles whether or not to draw a border around
the component. Different objects respond differently to this flag being
set; some ignore it altogether.

display(buffer\_flag) draws, or re-draws, the component in the dialog
window. If buffer\_flag is not null, then the component is displayed
into the buffer window, not the dialog window (this is used for
double-buffering purposes).

set\_accepts\_tab\_focus() sets the accepts\_tab\_focus\_flag meaning
that the object will gain the keyboard focus by way of the user
pressing the tab key repeatedly.\\
clear\_accepts\_tab\_focus() clears the accepts\_tab\_focus\_flag.

attrib(x[]) sets the graphic attributes of the component to the given
parameter list. For example:
w.attrib({\textquotedbl}font=helvetica{\textquotedbl},
{\textquotedbl}bg=pale blue{\textquotedbl}). Arguments may be either
strings or lists of strings. A description of the attributes and their
values is in the book {\textquotedbl}Graphics Programming in
Icon{\textquotedbl}.

get\_parent\_win() : window returns the window of the dialog in which
the component resides.

set\_pos(x, y) sets the x and y position of the component. Each
coordinate can be either an absolute pixel position, or can be given in
the form of a percentage plus or minus an offset.

{\sffamily
\ \ \ \ \ \ \ \ \ \ c.set\_pos(100, {\textquotedbl}25\%{\textquotedbl})}

{\sffamily
\ \ \ \ \ \ \ \ \ \ c.set\_pos({\textquotedbl}50\%-20{\textquotedbl},
{\textquotedbl}25\%+100{\textquotedbl})}

set\_align(x\_align:{\textquotedbl}l{\textquotedbl},
y\_align:{\textquotedbl}t{\textquotedbl}) sets the alignment of the
component. Options for x\_align are {\textquotedbl}l{\textquotedbl},
{\textquotedbl}c{\textquotedbl} and {\textquotedbl}r{\textquotedbl},
for left, center, and right alignment. Options for y\_align are
{\textquotedbl}t{\textquotedbl}, {\textquotedbl}c{\textquotedbl} and
{\textquotedbl}b{\textquotedbl}, for top center and bottom alignment.
Examples:

\iconcode{
\>   \ \ \ \ \ \ \ \# Place c so that its center is in the center of
the window, and its top left corner is (10,10). \\
\>   \ \ \ \ \ \ \ c.set\_pos({\textquotedbl}50\%{\textquotedbl},
{\textquotedbl}50\%{\textquotedbl}) \\
\>   \ \ \ \ \ \ \ c.set\_align({\textquotedbl}c{\textquotedbl},
{\textquotedbl}c{\textquotedbl}) \\
\>   \ \ \ \ \ \ \ c.set\_pos(10, 10) \\
\>   \ \ \ \ \ \ \ c.set\_align({\textquotedbl}l{\textquotedbl},
{\textquotedbl}t{\textquotedbl})
}

set\_size(w, h) sets the size of the component. The parameters are as
for set\_pos() above. Some components will set sensible default sizes,
but for others the size must be set explicitly.

handle\_event(e) : Event? is over-ridden by all this
class{\textquotesingle}s subclasses. It is the method that handles an
Icon event e. It would not normally be called by a user program. Its
result is passed to the dialog\_event() method of the dialog.

The first two fields of the Event structure are the Icon event e and the
object itself. The third field is the code, which can be any integer.
For example:

\iconcode{
\>   \ \ \ \ \ \ \ method handle\_event(e) \\
\>   \ \ \ \ \ \ \ \ \ \ ... \\
\>   \ \ \ \ \ \ \ \ \ return Event(e, self, 0) \\
\>   \ \ \ \ \ \ \ end
}

do\_shading(w) is called from a component{\textquotesingle}s display()
method. This method filters the component to give a shaded appearance
if the is\_shaded\_flag is set. w is the window to use (normally cwin).

in\_region(x:\&x,y:\&y) succeeds if the component is not shaded and
(x,y) lies within the component.

got\_focus() is called when the component gets the keyboard focus. It
may be extended in subclasses. For example:

\iconcode{
\>   \ \ method got\_focus() \\
\>   \ \ \ \ self\$Component.got\_focus() \\
\>   \ \ \ \ \# \\
\>   \ \ \ \ \# Display the box cursor \\
\>   \ \ \ \ \# \\
\>   \ \ \ \ display() \\
\>   \ \ end
}

lost\_focus() is called when the component loses the keyboard focus; it
may be extended.

unique\_start() initiates unique event processing for this object by
calling the parent dialog{\textquotesingle}s set\_unique()
method.\\
unique\_end(x) ends unique event processing for this object by calling
the parent dialog{\textquotesingle}s clear\_unique(x) method.

init() sets up the cloned windows for the component. This method should
be called for any components created and used inside any custom
components.

set\_parent\_dialog(x) sets the owning Dialog of the component to
x.\\
get\_parent\_dialog() : Dialog returns the parent dialog of the
component.

firstly() is invoked after the position of the object has been computed,
but before the object has been displayed in the window. This method may
be extended in subclasses.\\
finally() is invoked just before the window is closed. This method may
be extended in subclasses:

\iconcode{
\>   \ \ \ \ \ \ \ method finally() \\
\>   \ \ \ \ \ \ \ \ \ \ self\$Component.finally() \\
\>   \ \ \ \ \ \ \ \ \ \ \# Do something here \\
\>   \ \ \ \ \ \ \ \ \ \ ... \\
\>   \ \ \ \ \ \ \ \ \ \ return \\
\>   \ \ \ \ \ \ \ end
}

resize() computes the absolute positions and sizes from the
specifications given by set\_pos() and set\_size(). This method needs
to be extended for a component that contains other components. See the
section on custom components for an example.

x\_spec, y\_spec are the x and y positions as specified by set\_pos(),
e.g. {\textquotedbl}50\%{\textquotedbl}\\
w\_spec, h\_spec are the width and height specifiers as specified in
set\_size(), e.g. {\textquotedbl}100\%{\textquotedbl}\\
x\_align, y\_align are the x and y alignment as specified in
set\_align(), e.g. {\textquotedbl}l{\textquotedbl},
{\textquotedbl}b{\textquotedbl}.

The following four attributes are absolute dimensions in pixels,
compiled from x\_spec, y\_spec, w\_spec, and h\_spec, and the
dimensions of the enclosing object or window.

x and y are the x and y positions computed from x\_spec and
y\_spec.\\
w and h are the width and height computed from w\_spec and h\_spec.

cwin is a cloned window created by combining the
Dialog{\textquotesingle}s canvas with the Component{\textquotesingle}s
attributes, so drawing into this window will draw straight to the
Dialog window with the correct attributes. cbwin is a cloned window
created by combining a buffer window with the
Component{\textquotesingle}s attributes. This is used solely for
double-buffering purposes.

parent\_dialog is the Dialog class \index{instance}instance of which
this Component is a part.

attribs is a list of strings specifying graphics attributes, e.g.
[{\textquotedbl}bg=blue{\textquotedbl},
{\textquotedbl}resize=on{\textquotedbl}].

has\_focus : flag indicates whether the Component currently has the
keyboard focus. accepts\_tab\_focus\_flag : flag indicates whether the
Component accepts keyboard focus by way of the tab key being pressed.
draw\_border\_flag : flag indicates whether the Component should have a
border drawn around it. Many components (such as TextButtons) ignore
this flag. is\_shaded\_flag : flag indicates whether the Component
currently is shaded.

reference links to the object used to calculate absolute sizes from
percentage sizes. For objects placed directly into the Dialog, rather
than into some other object, this will point to the Dialog instance
itself, which over-rides the several methods get\_x\_reference() etc.,
appropriately.

{\sffamily\bfseries
\index{Container}Container : Component}

This class is a container for other components. The container itself is
invisible. Many of Component{\textquotesingle}s methods are over-ridden
by Container. A Dialog \index{instance}instance is a sub-class of this
class.\\
add(c:Component) adds the component c to the Container.\\
components are the components inside the Container.

{\sffamily\bfseries
\index{VisibleContainer}VisibleContainer : Component}

This is similar to a Container, except that the object itself is a
capable of display.\\
add(c:Component) adds the component c to the VisibleContainer.\\
components are the components inside the VisibleContainer.

{\sffamily\bfseries
\index{Button}Button : Component}

This is the parent class of button classes including TextButton and
IconButton. A button produces an Event of code 0 when the button is
depressed, and code 1 when it is released. By default, when a button
holds the \index{keyboard}keyboard focus a dashed line appears just
within the button. \ When return is pressed an event of code 2 is
generated. The method Dialog.set\_initial\_focus() can be used to give
the button the keyboard focus when the dialog is first displayed.

set\_no\_keyboard() disables the keyboard control over the button
described above. \ No dashed line will ever appear in the button
display and return will have no effect on the button even if it has the
focus.

{\sffamily\bfseries
\index{TextButton}TextButton : Button}

A button with a text label. The size of the button can either be set
using set\_size() or be left to default to a size based on the given
label.

set\_internal\_alignment(x) sets the alignment of the label within the
button. The parameter should be either {\textquotedbl}l{\textquotedbl},
{\textquotedbl}c{\textquotedbl} or {\textquotedbl}r{\textquotedbl} to
set the alignment to left, center or right respectively. If this method
is not invoked, then the alignment is centered.

set\_label(x) sets the label in the button to the given string.
Examples:

\iconcode{
\>   b := TextButton() \\
\>   b.set\_label({\textquotedbl}Cancel{\textquotedbl}) \\
\>   b.set\_pos({\textquotedbl}50\%{\textquotedbl},
{\textquotedbl}80\%{\textquotedbl}) \\
\>   b.set\_align({\textquotedbl}c{\textquotedbl},
{\textquotedbl}c{\textquotedbl}) \\
\>   add(b)
}

{\sffamily\bfseries
\index{IconButton}IconButton : Button}

This is a button with an Icon image within it. There is a useful program
in the Icon program library called xpmtoims, which will take an xpm
file and output the equivalent Icon image string, which can then be
inserted into a program. See also the X Window programs sxpm and pixmap
for viewing and editing xpm files respectively.

A border may be requested with set\_draw\_border(). Unless explicitly
specified, the size will default to the image{\textquotesingle}s size,
plus a standard surrounding area if a border is requested.

set\_img(s:string) sets the image to \texttt{s}, which should be in Icon
image format. Examples:

\iconcode{
\>   \# Create a button with a diamond image and a border \\
\>   b := IconButton() \\
\>   b.set\_draw\_border() \\
\>   b.set\_img({\textquotedbl}11,c1,\_ \\
\ \  \ \ \~{}\~{}\~{}\~{}\~{}0\~{}\~{}\~{}\~{}\~{}\_ \\
\ \  \ \ \~{}\~{}\~{}\~{}000\~{}\~{}\~{}\~{}\_ \\
\ \  \ \ \~{}\~{}0000000\~{}\~{}\_ \\
\ \  \ \ \~{}000000000\~{}\_ \\
\ \  \ \ \~{}\~{}0000000\~{}\~{}\_ \\
\ \  \ \ \~{}\~{}\~{}\~{}000\~{}\~{}\~{}\~{}\_ \\
\ \  \ \ \~{}\~{}\~{}\~{}\~{}0\~{}\~{}\~{}\~{}\~{}\_ \\
\ \  \ \ {\textquotedbl})
}

{\sffamily\bfseries
\index{ButtonGroup}ButtonGroup}

This class groups several Buttons together. \ Then, when the mouse is
clicked down on one of the Buttons and then dragged onto another before
being released, the other Button will go
{\textquotedbl}down{\textquotedbl}. \ This is the common behavior for
buttons in a bar along the top of an application.

Note: a Button must be added to both the ButtonGroup and the Dialog too.
Examples:

\iconcode{
\>   bg := ButtonGroup() \\
\>   b := TextButton() \\
\>   b.set\_label({\textquotedbl}Okay{\textquotedbl}) \\
\>   add(b) \\
\>   bg.add(b)
}

add(c:Button) adds the given Button to the ButtonGroup.

{\sffamily\bfseries
\index{Label}Label : Component}

This simply creates a text label in the dialog window. Calling
set\_draw\_border() adds a border around the label. The size will
default if not set.

set\_label(s:string) sets the label to the given string.

set\_internal\_alignment(x) sets the horizontal alignment of the label
within the area of the component; should be
{\textquotedbl}l{\textquotedbl}, {\textquotedbl}c{\textquotedbl} or
{\textquotedbl}r{\textquotedbl}. Default is
{\textquotedbl}l{\textquotedbl}. \ If the horizontal size is left to
default, then setting this field should make no difference, because the
size of the component will be set so that the string just fits into it.

{\sffamily\bfseries
\index{Icon}Icon : Component}

This displays an icon, supplied in Icon image format. A border may be
requested with set\_draw\_border(). The size defaults to the
image{\textquotesingle}s size, plus a standard surrounding area if a
border is requested. set\_img(s:string) sets the image to be displayed.

{\sffamily\bfseries
\index{Image}Image : Component}

This class loads an image from a file and displays it. The image should
be in GIF format. \ A border may be included with set\_draw\_border().
The size of the area into which the image is drawn must be set with
set\_size().

set\_filename(s:string) sets the name of the file from which to load the
image; redisplay the image from the new file if appropriate.

set\_scale\_up() causes the image to be scaled up to fit in the space
specified by set\_size(). The image will not be distorted, but will be
expanded to fill one of the dimensions depending on its shape. If the
image is bigger than the specified size then it will always be scaled
down.

set\_internal\_alignment(x:{\textquotedbl}c{\textquotedbl},
y:{\textquotedbl}c{\textquotedbl}) sets the horizontal and vertical
alignment of the image within the area of the component; x should be
{\textquotedbl}l{\textquotedbl}, {\textquotedbl}c{\textquotedbl} or
{\textquotedbl}r{\textquotedbl}, y should be
{\textquotedbl}t{\textquotedbl}, {\textquotedbl}c{\textquotedbl} or
{\textquotedbl}b{\textquotedbl}.

{\sffamily\bfseries
\index{Border}Border : VisibleContainer}

This class provides decorative borders. Optionally, a single other
component can be the title of the Border. This would normally be a
Label object, but it could also be a CheckBox, Icon, or whatever is
desired. The add(c) method from superclass VisibleContainer is used to
set the title.

set\_internal\_alignment(x) sets the alignment of the title object. The
input string should be {\textquotedbl}l{\textquotedbl},
{\textquotedbl}c{\textquotedbl} or {\textquotedbl}r{\textquotedbl}.
Examples:

\iconcode{
\>   b := Border() \\
\>   \# \\
\>   \# Add a Label as the title \\
\>   \# \\
\>   l := Label() \\
\>   l.set\_label({\textquotedbl}Title String{\textquotedbl}) \\
\>   b.add(l) \\
\>   add(b)
}

{\sffamily\bfseries
\index{ScrollBar}ScrollBar : Component}

This class provides horizontal and vertical scroll bars. There are two
ways to use a scroll bar. The first way is to set a total\_size
(represented by the whole bar), a page\_size (represented by the
draggable button) and an increment\_size (being the amount
added/subtracted when the top/bottom button is pressed). \ The value
will then range from zero to (total\_size - page\_size) inclusive. An
initial value must be set with the set\_value() method. Examples:

\iconcode{
\>   vb := ScrollBar() \\
\>   vb.set\_pos({\textquotedbl}85\%{\textquotedbl},
{\textquotedbl}25\%{\textquotedbl}) \\
\>   vb.set\_size(20, {\textquotedbl}40\%{\textquotedbl}) \\
\>   vb.set\_total\_size(130) \\
\>   vb.set\_page\_size(30) \\
\>   vb.set\_increment\_size(1) \\
\>   vb.set\_value(0) \\
\>   add(vb)
}

Alternatively, a scroll bar can be used as a slider that ranges over a
given range of values. In this case, the range is set with
set\_range(). It is still necessary to set the increment\_size and the
initial\_value, as above, but page\_size and total\_size should not be
set.

Real numbers as opposed to integers can be used for the range settings
if desired. Examples:

\iconcode{
\>   vb := ScrollBar() \\
\>   vb.set\_pos({\textquotedbl}85\%{\textquotedbl},
{\textquotedbl}25\%{\textquotedbl}) \\
\>   vb.set\_size(20, {\textquotedbl}40\%{\textquotedbl}) \\
\>   vb.set\_range(2, 25) \\
\>   vb.set\_value(10) \\
\>   vb.set\_increment\_size(1) \\
\>   add(vb)
}

An Event is returned whenever the buttons are pressed or the bar
dragged; the value can be retrieved by get\_value(). The event code
(obtainable by get\_code()) is 1 if the bar has been dragged, and 0 if
either button has been pressed or the bar released after being dragged.
This fact can be used to reduce the number of events which are
processed by the user{\textquotesingle}s program - just ignore events
with code 1.

set\_is\_horizontal() makes the scroll bar horizontal (default is
vertical).\\
set\_range(x, y) sets the range of the scroll bar from x to y inclusive;
x may be integer or real.

set\_total\_size(x) sets the total size which the scroll bar area
represents.\\
get\_total\_size() returns the total size.\\
set\_page\_size(x) sets the size that the bar in the scroll bar area
represents.\\
get\_page\_size() gets the page size.

set\_value(x) sets the value representing the top of the bar in the
scroll bar. The value is forced into range if it is not in range
already.\\
get\_value() gets the value.\\
set\_increment\_size(x) sets the amount to increase the value by when a
button is pressed.

{\sffamily\bfseries
\index{TextField}TextField : Component}

TextField is a class for a single input line of text. The text can
scroll within the area specified. By default, a border surrounds the
text area; this can be turned of by using clear\_draw\_border(). The
horizontal size must be set by the set\_size() method: there is no
default (the vertical size will default, however). An event is
generated when return is pressed (with code 0), and whenever the
contents are changed (with code 1).

get\_contents() returns the present contents of the text field.
set\_contents(x) sets the contents of the field. If not invoked then
the initial content is the empty string. Examples:

\iconcode{
\>   t := TextField() \\
\>   t.set\_pos(50, 250) \\
\>   \# Vertical size will default \\
\>   t.set\_size(100) \\
\>   t.set\_contents({\textquotedbl}Initial string{\textquotedbl}) \\
\>   add(t)
}

{\sffamily\bfseries
\index{CheckBox}CheckBox : Component}

An instance of this class is a small button with a label which is either
in an on or off state. The button is an Icon image, which may be
specified by the user if desired. The images will default to
appropriate values if not specified. The size will also default if not
specified.

set\_imgs(x, y) sets the up/down images for the button. The images
should be in Icon image format. The two images must have the same
dimensions.

is\_checked() succeeds if the button is down (checked); fail
otherwise.\\
toggle\_is\_checked() toggles the initial status of the button.\\
set\_is\_checked() sets the status of the button to checked.\\
clear\_is\_checked() sets the status of the button to not checked.

set\_label(x) sets the label of the component to the given
string.\\
get\_status() returns 1 if the CheckBox is checked, \&null otherwise.
Examples:

\iconcode{
\>   c := CheckBox() \\
\>   c.set\_pos(200, 100) \\
\>   c.set\_label({\textquotedbl}Checkbox{\textquotedbl}) \\
\>   add(c)
}

{\sffamily\bfseries
\index{CheckBoxGroup}CheckBoxGroup}

This class contains several CheckBox objects that act together as
{\textquotedbl}radio buttons{\textquotedbl}. Adding a CheckBox to a
CheckBoxGroup sets the image style of the CheckBox to diamonds rather
than boxes. The status of a CheckBoxGroup should be set with the
set\_which\_one() method, not by turning the individual CheckBoxes
on/off with their own methods - that would confuse the program. Note: a
CheckBox must be added to both the CheckBoxGroup and the dialog box.

set\_by\_flag(i) sets the CheckBox which is down according to the
integer i. If i = 1 then the first CheckBox is down, if i = 2 the
second is down, etc for i = 4, 8, 16.\\
get\_by\_flag() returns an integer in the range 1, 2, 4, 8 ... depending
upon whether the first, second, third etc CheckBox is down.

add(c:CheckBox) adds c to the CheckBoxGroup.

get\_which\_one() returns the CheckBox which is currently down.\\
set\_which\_one(x:CheckBox) sets which CheckBox is down to x. Examples:

\iconcode{
\>   \# \\
\>   \# Create a CheckBoxGroup of 3 CheckBoxes \\
\>   \# \\
\>   c := CheckBoxGroup() \\
\ \\
\>   c1 := CheckBox() \\
\>   c1.set\_pos(200, 50) \\
\>   c1.set\_label({\textquotedbl}Checkbox 1{\textquotedbl}) \\
\>   add(c1) \\
\>   c.add(c1) \\
\ \\
\>   c2 := CheckBox() \\
\>   c2.set\_pos(200, 90) \\
\>   c2.toggle\_is\_shaded() \\
\>   c2.set\_label({\textquotedbl}Checkbox 2{\textquotedbl}) \\
\>   add(c2) \\
\>   c.add(c2) \\
\ \\
\>   c3 := CheckBox() \\
\>   c3.set\_pos(200, 130) \\
\>   c3.set\_label({\textquotedbl}Checkbox 3{\textquotedbl}) \\
\>   add(c3) \\
\>   c.add(c3) \\
\>   \# \\
\>   \# Initially, set the first one {\textquotedbl}on{\textquotedbl} \\
\>   \# \\
\>   c.set\_which\_one(c1)
}

{\sffamily\bfseries
\index{TextList}TextList : Component}

This class displays a list of strings. The list is optionally editable,
providing a multiline text input region. If in editable mode then an
event is generated whenever the contents change; otherwise an event is
generated when a line is highlighted by being clicked. Horizontal and
vertical scroll bars are displayed if necessary.

If not in editable mode, then optionally the user can be allowed to
select either one line only, or several lines. \ In either case, an
event is generated when a line is selected. There is quite a high
computational overhead for an editable TextList. For a large number of
lines, this may result in a sluggish performance.

set\_is\_editable() specifies that the contents may be edited.

get\_contents() : list returns the current contents as a list of
strings.\\
set\_contents(x:list, line, left\_pos, preserve\_selections) sets the
contents to \texttt{x} and sets the position to line and left\_pos. If
these parameters are omitted then the default is to start at line 1,
with left offset zero if the window is not already open, or to retain
the existing position if it is. If the last parameter is non-null then
the current selections are retained; otherwise they are reset. This
method has no effect if the component is in editable mode and the
window is already open.

\iconcode{
\>   \ \ tl := TextList() \\
\>   \ \ tl.set\_contents(data) \\
\>   \ \ \ ... \\
\>   \ \ \# Amend data and go to end of data \\
\>   \ \ put(data, {\textquotedbl}New line{\textquotedbl}) \\
\>   \ \ tl.set\_contents(data, *data, 0)
}

The method set\_select\_one() specifies that only one line of the list may be
highlighted, while method set\_select\_many() specifies that several lines of
the list may be highlighted. Of no effect if in editable mode.

get\_selections() : list returns a list of the numbers of the lines that
are highlighted.\\
set\_selections(l) sets the line numbers that are selected using the
given list of line numbers.

\iconcode{
\>   tl := TextList() \\
\>   tl.set\_pos({\textquotedbl}50\%{\textquotedbl},
{\textquotedbl}50\%{\textquotedbl}) \\
\>   tl.set\_size({\textquotedbl}70\%{\textquotedbl},
{\textquotedbl}50\%{\textquotedbl}) \\
\>   tl.set\_align({\textquotedbl}c{\textquotedbl},
{\textquotedbl}c{\textquotedbl}) \\
\>   tl.set\_contents(data) \# data is a list of strings \\
\>   add(tl)
}

{\sffamily\bfseries
\index{DropDown}DropDown}

This class is a superclass of List and EditList below.

set\_selection\_list(x) sets the list of selections to the list
x.\\
get\_selection() returns an integer corresponding to the item in the
list presently selected.

{\sffamily\bfseries
\index{List}List : Component : DropDown}

This component is for selecting one string from a list of several. When
a button is pressed a list appears (possibly with a scroll bar) from
which one item can be selected. An Event is generated whenever an item
is selected from the list. A width must be specified for this
component.

set\_selection(x) sets the selected item to element x.\\
set\_constant\_label(x) supplies a string that will always appear in the
text part of the component, rather than the currently selected item.

The methods that are needed to handle the list of selections are mostly
inherited from DropDown. 

\iconcode{
\>   L := List() \\
\>   L.set\_selection\_list([{\textquotedbl}Red{\textquotedbl},{\textquotedbl}Green{\textquotedbl},{\textquotedbl}Yellow{\textquotedbl},{\textquotedbl}Blue{\textquotedbl},{\textquotedbl}Orange{\textquotedbl}]) \\
\>   L.set\_size(120) \\
\>   L.set\_pos(100, 100) \\
\>   L.set\_selection(2) \# Green will be the first selection \\
\>   add(L)
}

{\sffamily\bfseries
\index{EditList}EditList : Component : DropDown}

An EditList functions in the same way as a List above, but the user may
edit the item that is selected. An extra method is therefore supplied
to get the content, as it may not correspond to an element of the list.
An Event is generated with code 0 if an element of the list is
selected, with code 1 if return is pressed, and with code 2 if the user
edits the selected item.

get\_contents() returns the contents of the selected item (which may
have been edited).\\
set\_contents(x) sets the initial contents of the text to the given
string.

{\sffamily\bfseries
\index{MenuBar}MenuBar : Component}

This class is the base from which menu systems are created. Menu items
are added to this class; they are not separate components added to the
dialog itself. The default position is (0, 0); the default size is
100\% of the width of the screen and a reasonable height based on the
font specified. add(c:Menu) adds c to the MenuBar. This will be one
drop down menu. Items are then added to the Menu.

{\sffamily\bfseries
\index{MenuButton}MenuButton : Component}

This is similar to MenuBar, but holds just a single drop-down menu,
rather than several. set\_menu(x:Menu) sets the menu to be displayed
when the component is clicked.

{\sffamily\bfseries
\index{MenuEvent}MenuEvent : Event}

This is just a subclass with an extra code variable. menu\_code is
returned by a MenuComponent and indicates to the menu system what to do
with the event. It takes one of the following values:

Code\ \ \ \ Action\\
FAIL\_1\ \ \ \ The Menu system closes and the last event is not passed
on to the dialog.\\
FAIL\_2\ \ \ \ The Menu system closes and the last event is passed on to
the dialog.\\
CONTINUE\ \ The Menu system does not close and continues to process
events.\\
SUCCEED\ \ The menu system closes and produces the given event, which is
passed to the\\
 \ \ \ \ dialog{\textquotesingle}s dialog\_event() method. The last
event is not passed to other components.

{\sffamily\bfseries
\index{MenuComponent}MenuComponent}

This is the superclass of all the objects that make up the menu system
(other than MenuBar of course). For components that appear in a menu
with a label, an optional left/right string/image can be set.

set\_label\_left(x) sets the optional left label to the given
string.\\
set\_label\_right(x) sets the optional right label to the given
string.\\
set\_img\_left(x) sets the optional left image to the given Icon
image.\\
set\_img\_right(x) sets the optional right image to the given Icon
image.

toggle\_is\_shaded() toggles whether or not the item is shaded. If it
is, it is\\
 \ \ \ \ \ displayed in a filtered way and will not accept input.

set\_is\_shaded() sets the shaded status of the component to
shaded.\\
clear\_is\_shaded() sets the shaded status of the component to not
shaded.

set\_label(x) sets the center label to the given string.

{\sffamily\bfseries
\index{SubMenu}SubMenu : MenuComponent}

This class encapsulates a \texttt{Menu} object that when selected will
display something outside the menu itself (for example a sub-menu of
other menu items). It is intended to be extended by custom menu
components, and should not be instantiated itself.

hide\_non\_menu() is empty; it is implemented by the Menu class and
called for any\\
 \ \ \ \ \ SubMenu object, but would not normally need to be over-ridden
by a custom class.

set\_which\_open(x) is another empty method. The same comment applies to
this method.

resize() is another empty method, but it may be convenient to over-ride
it in order\\
 \ \ \ \ \ to initialize the width and height of the object here.

display() must be over-ridden; it displays the object.

handle\_event(e) handles the Icon event e and must be over-ridden.

hide() hides (closes) the object{\textquotesingle}s display and must be
over-ridden.

{\sffamily\bfseries
\index{Menu}Menu : SubMenu}

This class encapsulates a drop down menu, or a sub-menu. The left,
center and right labels/images of the elements within it are formatted
within the menu automatically.

add(c:Component) adds the given component to the Menu.

{\sffamily\bfseries
TextMenuItem : MenuComponent}

This class encapsulates a single text item in a Menu. \ It has no
additional methods that the user need call other than are contained in
its parent class, MenuComponent.

{\sffamily\bfseries
\index{CheckBoxMenuItem}CheckBoxMenuItem : MenuComponent}

This class encapsulates a check box in a menu. Several CheckBoxMenuItems
may be added to a CheckBoxGroup structure to give {\textquotedbl}radio
buttons{\textquotedbl} within menus.

set\_imgs(x, y) sets the up and down images to x and y respectively. The
default is boxes, unless\\
 \ \ \ \ \ the component is added to a CheckBoxGroup in which case the
default is diamonds.

is\_checked() succeeds if the component is checked; fail
otherwise.\\
set\_is\_checked() sets the status of the button to checked.\\
clear\_is\_checked() sets the status of the button to not checked.

{\sffamily\bfseries
\index{MenuSeparator}MenuSeparator : MenuComponent}

This is simply a horizontal bar in a Menu, for decorative purposes. It
has no methods that the user need invoke.

{\sffamily\bfseries
\index{TableColumn}TableColumn : TextButton}

This class provides one column within a Table class, which displays a
table of data. A column has a label with a button that produces an
event when clicked. \ The column may be expanded or contracted by
dragging the right edge of the button. Calling the set\_label(x) method
of the superclass, TextButton, sets the label.

set\_column\_width(x) sets the initial width of the column, in pixels;
this must be specified.

\iconcode{
\>   c1 := TableColumn() \\
\>   c1.set\_internal\_alignment({\textquotedbl}r{\textquotedbl}) \#
Label is right aligned \\
\>   c1.set\_column\_width(80) \\
\>   c1.set\_label({\textquotedbl}Number{\textquotedbl})
}

{\sffamily\bfseries
\index{Table}Table : Component}

This class displays a table, the columns of which are set up using
TableColumns.

set\_button\_bar\_height(x) sets the height of the buttons at the top in
pixels.

set\_contents(x) sets the contents of the table. The parameter should be
a two\\
 \ \ \ \ \ dimensional list. Each element of the list should correspond
to one row of the table.

set\_contents(x, line, left\_pos, preserve\_selections) sets the
contents to x and sets the position to\\
 \ \ \ \ \ line and left\_pos. \ If these parameters are omitted then
the default is to start at line 1, with left\\
 \ \ \ \ \ offset zero if the window is not already open, or to retain
the existing position if it is. If the\\
 \ \ \ \ \ last parameter is non-null then the current selections are
retained; otherwise they are reset.

add(c:TableColumn) adds the given TableColumn to the Table.\\
set\_select\_one() specifies that only one row of the table may be
highlighted.\\
set\_select\_many() allows several rows of the table to be
highlighted.\\
get\_selections() returns a list of the numbers of the rows which are
highlighted.\\
set\_selections(L:list) sets the line numbers that are selected to the
list of line numbers L.

{\sffamily\bfseries
\index{TabItem}TabItem : Container}

This class represents a single pane in a TabSet. Components are added to
the TabItem using Container{\textquotesingle}s add() method. They are
then displayed and accept input when that TabItem is selected.
Components added to the TabItem are positioned relative to the position
and size of the parent TabSet. Therefore for example
set\_pos({\textquotedbl}50\%{\textquotedbl},
{\textquotedbl}50\%{\textquotedbl}) refers to the center of the TabSet
rather than the center of the screen. \ The components also inherit any
window attributes of the TabSet, such as font, color and so on.

set\_label(x) sets the TabItem{\textquotesingle}s label.

{\sffamily\bfseries
\index{TabSet}TabSet : VisibleContainer}

This class holds the several TabItems.

set\_which\_one(x) sets the TabItem that is to be displayed first;
default is the first that was added.\\
add(c:TabItem) adds the given TabItem to the TabSet.

{\sffamily\bfseries
\index{Panel}Panel : VisibleContainer}

This class simply contains other components. The components inside have
their sizes and positions computed relative to the Panel and also
inherit the Panel{\textquotesingle}s windowing attributes. Components
are added using the add() method of VisibleContainer.

{\sffamily\bfseries
\index{OverlayItem}OverlayItem : Container}

This class is one {\textquotedbl}pane{\textquotedbl} in an OverlaySet,
which is rather like a TabSet except that there are no tabs, and
control over which pane is displayed is entirely the affair of the
program. The components inside have their sizes and positions computed
relative to the parent OverlaySet and also inherit the
OverlaySet{\textquotesingle}s windowing attributes. \ Components are
added using the add() method of Container.

{\sffamily\bfseries
\index{OverlaySet}OverlaySet : VisibleContainer}

An OverlaySet is a set of OverlayItems.

set\_which\_one(x) sets which OverlayItem is currently displayed;
default is first that was added.\\
add(c:OverlayItem) adds the given OverlayItem to the OverlaySet.


\bigskip

