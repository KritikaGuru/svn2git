#
# ABCss.icn - test whether lines contain strings with equal numbers
# of a's followed by b's followed by c's: a^nb^nc^n
#
# Status: as-given supposedly works, but the deferred evaluation solution
# is commented out because it appeared NOT to work and needs repair.
# Compare and synchronize with JGG paper benchmarks section solution.
#
procedure test(a,b,c)
	return (a  = (b - a)) & (a = (c - b))
end

procedure main()
   p := Pos(1) || Span("a") || .> a || Span("b") || .> b ||
	 Span("c") || .> c || Rpos(0) # && `test(a,b,c)` fix

   while line := read() do
      if (line ?? p) & ((a-1) = (b-a) = (c-b))
      then write("accepted") 
      else write("rejected")
end
