# pg 54
# Original SNOBOL code
#	&ANCHOR = 1
#	VARIABLE = ANY('XYZ')
#	ADDOP = ANY('+-')
#	MULOP = ANY('*/')
#	FACTOR = VARIABLE | '(' *EXP ')'
#	TERM = FACTOR | *TERM MULOP FACTOR
#	EXP = ADDOP TERM | TERM | *EXP ADDOP TERM
#LOOP	STRING = TRIM(INPUT)				:F(END)
#	STRING EXP RPOS(0)				:F(NOGOOD)
#	OUTPUT = STRING ' IS AN EXPRESSION'		:(LOOP)
#NOGOOD	OUTPUT = STRING ' IS NOT AN EXPRESSION'		:(LOOP)
#END

procedure main()
   variable := Any("xyz")
   addop    := Any("+-")
   mulop    := Any("*/")
   factor   := variable .| "(" || `exp` || ")"
   term     := factor .|  factor || mulop || `term`
   exp      := addop || term .| term .| term || addop || `exp`
   p        := Pos(1) || exp || Rpos(0)

   L := [
	 "x+y*(z+x)",
	 "x+y+z",
	 "xy"
	 ]
   every s := !L do {
      if ( s ?? p ) then
	 write(s, " is an expression")
      else
	 write(s, " is not an expression")
      }
end
