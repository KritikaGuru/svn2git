# expss.icn
# Original SNOBOL4 code: Green Book, p. 54
# Tests: Any(), .|, ||, ??, `v`, Pos(), Rpos()

procedure main()
   variable := Any("xyz")
   addop    := Any("+-")
   mulop    := Any("*/")
   factor   := variable .| "(" || `exp` || ")"
   term     := factor .|  factor || mulop || `term`
   exp      := addop || term .| term .| term || addop || `exp`
   p        := Pos(1) || exp || Rpos(0)

   while s := read() do {
      if ( s ?? p ) then
   write(s, " is an expression")
      else
   write(s, " is not an expression")
      }
end
