## rasterisk.icn
## Paden Rumsey
## July 10, 2016

procedure main()
    while s := read() do {
	write("Simple Arbno/Asterisk")
	regx :=  <[s]*> || "i"
	write(image(regx))
	match_string(s, regx)

	write("String Asterisk")
	regx := <"the"*>
	write(image(regx))
	match_string(s, regx)
	
	## This particular test fails to what I believe is another 
	## preprocessing error. You can include character literals
	## in brackets but if you just include the single quotes the
        ## preprocessor doesn't break it down like it should and you
	## get a compiler error

	##write("Cset Asterisk")
	##regx := <'i'*>
	##write(image(regx))
	##match_string(s, regx)

	## This one compiles better
	write("Cset Asterisk with Brackets")
	regx := <[i]*>
	write(image(regx))
	match_string(s, regx)

	write("Arbno in Arbno (Complex Arbno")
	regx := Arbno(<s*>)
	write(image(regx))
	match_string(s, regx)

    }
end

procedure match_string(s, r)
    r := r -> out || Rem() -> remain
    if s ?? r then {
	write("The matched string is ", out, " the remainder is ", remain)
	}
    else
	write("The regex failed to match")
    write("\n")
end
